var Client;(()=>{"use strict";var e={d:(t,a)=>{for(var n in a)e.o(a,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:a[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};function a(){if(""==document.getElementById("search_destiny").value)alert("Please, enter a valid destination.");else if(""==document.getElementById("search_departure_date").value)alert("Please, enter a departure date.");else if(""==document.getElementById("search_arrival_date").value)alert("Please, enter a arrival date.");else{let e=`http://api.geonames.org/searchJSON?q=${encodeURIComponent(document.getElementById("search_destiny").value)}&featureClass=P&featureCode=PPL&countryCode=US&maxRows=20&orderby=name&cities=cities500&username=michelrvieira`;Client.getDataApiGeonames(e).then((function(e){if(0==e.totalResultsCount)alert("Destiny not found. Please, inform a valid destiny.");else if(e.totalResultsCount>=1){document.getElementsByClassName("search_result")[0].style.visibility="visible",document.getElementById("search_destiny").disabled=!0,document.getElementById("search_departure_date").disabled=!0,document.getElementById("search_arrival_date").disabled=!0,document.getElementById("search").disabled=!0;const t=document.createDocumentFragment();for(let a=0;a<e.geonames.length;a++){const n=document.createElement("option");n.setAttribute("id",`${a}`),n.setAttribute("value",`${e.geonames[a].name}`),0==a&&n.setAttribute("selected","true"),n.textContent=`${e.geonames[a].name}, ${e.geonames[a].countryCode}`,t.appendChild(n)}document.querySelector("select").appendChild(t)}Client.displayImage(e),Client.weatherForecast(e)}))}document.getElementById("departure_date_result").value=document.getElementById("search_departure_date").value,document.getElementById("arrival_date_result").value=document.getElementById("search_arrival_date").value;const e=Math.round(Math.abs((new Date(document.getElementById("arrival_date_result").value).getTime()-new Date(document.getElementById("departure_date_result").value).getTime())/864e5));document.getElementsByTagName("p")[0].innerHTML=`<p>Travel time: ${e} days</p>`}let n;e.r(t),e.d(t,{displayImage:()=>r,getDataApiGeonames:()=>d,getDataApiPixabay:()=>l,visiblePage:()=>a,weatherForecast:()=>o});const d=async e=>{const t=await fetch(e);try{return n=[],n=await t.json(),console.log(n),n}catch(e){console.log("error",e)}};function r(e){let t=encodeURIComponent(document.getElementById("destiny_result").value.trim()),a=`https://pixabay.com/api/?key=30837430-c6d554c6141da59f50e7e82d6&q=${t}&lang=en&image_type=photo`;Client.getDataApiPixabay(a).then((function(n){let d=document.getElementById("destiny_result").selectedIndex;t=0==n.totalHits?encodeURIComponent(e.geonames[d].countryName):encodeURIComponent(e.geonames[d].name),a=`https://pixabay.com/api/?key=30837430-c6d554c6141da59f50e7e82d6&q=${t}&lang=en&image_type=photo`,Client.getDataApiPixabay(a).then((function(e){document.getElementById("destination_image").setAttribute("src",e.hits[0].webformatURL)}))}))}const l=async e=>{const t=await fetch(e);try{return await t.json()}catch(e){console.log("error",e)}};function o(e){let t=document.getElementById("destiny_result").selectedIndex,a=e.geonames[t].lat,n=e.geonames[t].lng;s("/coordinates",{lat:a,lng:n}).then((function(){c()}))}const s=async(e="",t={})=>{const a=await fetch(e,{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});try{const e=await a.json();return console.log(e),e}catch(e){console.log("error",e)}},c=async()=>{const e=await fetch("/wheaterbit/forecast");try{const t=await e.json();console.log(t)}catch(e){console.log("error",e)}};document.cookie="cookie2=value2; SameSite=None; Secure";let i=(new Date).toISOString().substring(0,10),m="";document.getElementById("search_departure_date").setAttribute("min",i),document.getElementById("search_departure_date").setAttribute("onkeydown","return false"),document.getElementById("search_departure_date").addEventListener("click",(function(){m=document.getElementById("search_arrival_date").value,m==i?(document.getElementById("search_departure_date").setAttribute("min",i),document.getElementById("search_departure_date").setAttribute("max",i),document.getElementById("search_departure_date").value=i):m>i&&(document.getElementById("search_departure_date").setAttribute("min",i),document.getElementById("search_departure_date").setAttribute("max",m))})),document.getElementById("search_arrival_date").setAttribute("min",i),document.getElementById("search_arrival_date").setAttribute("onkeydown","return false"),document.getElementById("search_arrival_date").addEventListener("click",(function(){document.getElementById("search_departure_date").value>=m&&""!=document.getElementById("search_departure_date").value&&document.getElementById("search_arrival_date").setAttribute("min",document.getElementById("search_departure_date").value)})),document.getElementsByClassName("search_result")[0].style.visibility="hidden",document.getElementById("destiny_result").addEventListener("change",(()=>{Client.displayImage(n),Client.weatherForecast(n)})),document.getElementById("new_search").addEventListener("click",(()=>{document.getElementsByClassName("search_result")[0].style.visibility="hidden",document.getElementById("search_destiny").disabled=!1,document.getElementById("search_departure_date").disabled=!1,document.getElementById("search_departure_date").value="",document.getElementById("search_arrival_date").disabled=!1,document.getElementById("search_arrival_date").value="",document.getElementById("search").disabled=!1;const e=document.getElementById("destiny_result");for(;e.hasChildNodes();)e.removeChild(e.firstChild);document.getElementById("destination_image").setAttribute("src",""),document.getElementById("departure_date_result").value="",document.getElementById("arrival_date_result").value="",document.getElementsByTagName("p")[0].textContent="",document.getElementsByTagName("textarea")[0].textContent=""})),Client=t})();